{"ast":null,"code":"// This file is automatically compiled by Webpack, along with any other files\n// present in this directory. You're encouraged to place your actual application logic in\n// a relevant structure within app/javascript and only use these pack files to reference\n// that code so it'll be compiled.\nrequire(\"@rails/ujs\").start();\n\nrequire(\"turbolinks\").start();\n\nrequire(\"@rails/activestorage\").start();\n\nrequire(\"channels\");\n\nrequire(\"jquery\"); // Uncomment to copy all static images under ../images to the output folder and reference\n// them with the image_pack_tag helper in views (e.g <%= image_pack_tag 'rails.png' %>)\n// or the `imagePath` JavaScript helper below.\n//\n// const images = require.context('../images', true)\n// const imagePath = (name) => images(name, true)\n\n\ndocument.addEventListener(\"turbolinks:load\", function () {\n  console.log('ready');\n  var Shots = {\n    previewShot: function previewShot() {\n      if (window.File && window.FileList && window.FileReader) {\n        var handleFileSelect = function handleFileSelect(evt) {\n          evt.stopPropagation();\n          evt.preventDefault();\n          var files = evt.target.files || evt.dataTransfer.files; // files is a FileList of File objects. List some properties.\n\n          for (var i = 0, f; f = files[i]; i++) {\n            // Only process image files.\n            if (!f.type.match('image.*')) {\n              continue;\n            }\n\n            var reader = new FileReader(); // Closure to capture the file information.\n\n            reader.onload = function (theFile) {\n              return function (e) {\n                // Render thumbnail.\n                var span = document.createElement('span');\n                span.innerHTML = ['<img class=\"thumb\" src=\"', e.target.result, '\" title=\"', escape(theFile.name), '\"/>'].join('');\n                document.getElementById('list').insertBefore(span, null);\n              };\n            }(f); // Read in the image file as a data URL.\n\n\n            reader.readAsDataURL(f);\n          }\n        };\n\n        var handleDragOver = function handleDragOver(evt) {\n          evt.stopPropagation();\n          evt.preventDefault();\n          evt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.\n        }; // Setup the dnd listeners.\n        // https://stackoverflow.com/questions/47515232/how-to-set-file-input-value-when-dropping-file-on-page\n\n\n        var dropZone = document.getElementById('drop_zone');\n        var target = document.documentElement;\n        var fileInput = document.getElementById('shot_user_shot');\n        var previewImage = document.getElementById('previewImage');\n        var newShotForm = document.getElementById('new_shot');\n\n        if (dropZone) {\n          dropZone.addEventListener('dragover', handleDragOver, false);\n          dropZone.addEventListener('drop', handleFileSelect, false); // Drop zone classes itself\n\n          dropZone.addEventListener('dragover', function (e) {\n            dropZone.classList.add('fire');\n          }, false);\n          dropZone.addEventListener('dragleave', function (e) {\n            dropZone.classList.remove('fire');\n          }, false);\n          dropZone.addEventListener('drop', function (e) {\n            e.preventDefault();\n            dropZone.classList.remove('fire');\n            fileInput.files = e.dataTransfer.files; // if on shot/id/edit hide preview image on drop\n\n            if (previewImage) {\n              previewImage.style.display = 'none';\n            } // If on shots/new hide dropzone on drop\n\n\n            if (newShotForm) {\n              dropZone.style.display = 'none';\n            }\n          }, false); // Body specific \n\n          target.addEventListener('dragover', function (e) {\n            e.preventDefault();\n            dropZone.classList.add('dragging');\n          }, false); // removes dragging class to body WHEN NOT dragging\n\n          target.addEventListener('dragleave', function (e) {\n            dropZone.classList.remove('dragging');\n            dropZone.classList.remove('fire');\n          }, false);\n        }\n      }\n    },\n    shotHover: function shotHover() {\n      $('.shot').hover(function () {\n        $(this).children('.shot-data').toggleClass('visible');\n      });\n    }\n  };\n  Shots.previewShot();\n  Shots.shotHover();\n});","map":{"version":3,"sources":["/home/jafet/projects/dribbble/app/javascript/packs/application.js"],"names":["require","start","document","addEventListener","console","log","Shots","previewShot","window","File","FileList","FileReader","handleFileSelect","evt","stopPropagation","preventDefault","files","target","dataTransfer","i","f","type","match","reader","onload","theFile","e","span","createElement","innerHTML","result","escape","name","join","getElementById","insertBefore","readAsDataURL","handleDragOver","dropEffect","dropZone","documentElement","fileInput","previewImage","newShotForm","classList","add","remove","style","display","shotHover","$","hover","children","toggleClass"],"mappings":"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","sourcesContent":["// This file is automatically compiled by Webpack, along with any other files\n// present in this directory. You're encouraged to place your actual application logic in\n// a relevant structure within app/javascript and only use these pack files to reference\n// that code so it'll be compiled.\n\nrequire(\"@rails/ujs\").start()\nrequire(\"turbolinks\").start()\nrequire(\"@rails/activestorage\").start()\nrequire(\"channels\")\nrequire(\"jquery\")\n\n\n// Uncomment to copy all static images under ../images to the output folder and reference\n// them with the image_pack_tag helper in views (e.g <%= image_pack_tag 'rails.png' %>)\n// or the `imagePath` JavaScript helper below.\n//\n// const images = require.context('../images', true)\n// const imagePath = (name) => images(name, true)\n\n\ndocument.addEventListener(\"turbolinks:load\", function() {\n  console.log('ready');\n\tvar Shots = {\n\t\tpreviewShot() {\n\t\t\tif (window.File && window.FileList && window.FileReader) {\n\n\t\t\t\tfunction handleFileSelect(evt) {\n\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\tevt.preventDefault();\n\n\t\t\t\t\tlet files = evt.target.files || evt.dataTransfer.files; \n\t\t\t\t\t// files is a FileList of File objects. List some properties.\n\t\t\t\t\tfor (var i = 0, f; f = files[i]; i++) {\n\n\t\t\t\t\t\t// Only process image files.\n\t\t\t\t\t\tif (!f.type.match('image.*')) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst reader = new FileReader();\n\n\t\t\t\t\t\t// Closure to capture the file information.\n\t\t\t\t\t\treader.onload = (function(theFile) {\n\t\t\t\t\t\t\treturn function(e) {\n\t\t\t\t\t\t\t\t// Render thumbnail.\n\t\t\t\t\t\t\t\tlet span = document.createElement('span');\n\t\t\t\t\t\t\t\tspan.innerHTML = ['<img class=\"thumb\" src=\"', e.target.result,\n\t\t\t\t\t\t\t\t\t'\" title=\"', escape(theFile.name), '\"/>'\n\t\t\t\t\t\t\t\t].join('');\n\t\t\t\t\t\t\t\tdocument.getElementById('list').insertBefore(span, null);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})(f);\n\n\t\t\t\t\t\t// Read in the image file as a data URL.\n\t\t\t\t\t\treader.readAsDataURL(f);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction handleDragOver(evt) {\n\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tevt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.\n\t\t\t\t}\n\n\t\t\t\t// Setup the dnd listeners.\n\t\t\t\t// https://stackoverflow.com/questions/47515232/how-to-set-file-input-value-when-dropping-file-on-page\n\t\t\t\tconst dropZone = document.getElementById('drop_zone');\n\t\t\t\tconst target = document.documentElement;\n\t\t\t\tconst fileInput = document.getElementById('shot_user_shot');\n\t\t\t\tconst previewImage = document.getElementById('previewImage');\n\t\t\t\tconst newShotForm = document.getElementById('new_shot');\n\n\n\t\t\t\tif (dropZone) {\n\t\t\t\t\tdropZone.addEventListener('dragover', handleDragOver, false);\n\t\t\t\t\tdropZone.addEventListener('drop', handleFileSelect, false);\n\n\t\t\t\t\t// Drop zone classes itself\n\t\t\t\t\tdropZone.addEventListener('dragover', (e) => {\n\t\t\t\t\t\tdropZone.classList.add('fire');\n\t\t\t\t\t}, false);\n\n\t\t\t\t\tdropZone.addEventListener('dragleave', (e) => {\n\t\t\t\t\t\tdropZone.classList.remove('fire');\n\t\t\t\t\t}, false);\n\n\t\t\t\t\tdropZone.addEventListener('drop', (e) => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tdropZone.classList.remove('fire');\n\t\t\t\t\t\tfileInput.files = e.dataTransfer.files;\n\t\t\t\t\t\t// if on shot/id/edit hide preview image on drop\n\t\t\t\t\t\tif (previewImage) {\n\t\t\t\t\t\t\tpreviewImage.style.display = 'none';\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// If on shots/new hide dropzone on drop\n\t\t\t\t\t\tif(newShotForm) {\n\t\t\t\t\t\t\tdropZone.style.display = 'none';\n\t\t\t\t\t\t}\n\t\t\t\t\t}, false);\n\n\t\t\t\t\t// Body specific \n\t\t\t\t\ttarget.addEventListener('dragover', (e) => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tdropZone.classList.add('dragging');\n\t\t\t\t\t}, false);\n\n\t\t\t\t\t// removes dragging class to body WHEN NOT dragging\n\t\t\t\t\ttarget.addEventListener('dragleave', (e) => {\n\t\t\t\t\t\tdropZone.classList.remove('dragging');\n\t\t\t\t\t\tdropZone.classList.remove('fire');\n\t\t\t\t\t}, false);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tshotHover() {\n\t\t\t$('.shot').hover(function() {\n\t\t\t\t$(this).children('.shot-data').toggleClass('visible');\n\t\t\t});\n\t\t}\n\n\t};\n\tShots.previewShot();\n\tShots.shotHover();\n\n\n});\n"]},"metadata":{},"sourceType":"module"}